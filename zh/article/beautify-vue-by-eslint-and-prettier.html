<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用ESLint ＆ Prettier美化Vue代码 | 静晴轩别苑</title>
    <meta name="description" content="繁华尽处，寻一无人山谷，建一木制小屋，铺一青石小路，与你晨钟暮鼓，安之若素。">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.031b6b85.css" as="style"><link rel="preload" href="/assets/js/app.97ceaf89.js" as="script"><link rel="preload" href="/assets/js/14.05d6de49.js" as="script"><link rel="preload" href="/assets/js/6.b86e266d.js" as="script"><link rel="preload" href="/assets/js/4.d86a8d0d.js" as="script"><link rel="prefetch" href="/assets/js/11.544205a9.js"><link rel="prefetch" href="/assets/js/2.b10b5f9b.js"><link rel="prefetch" href="/assets/js/3.ded60ad4.js"><link rel="prefetch" href="/assets/js/5.b654302b.js"><link rel="prefetch" href="/assets/js/7.afe64b05.js"><link rel="prefetch" href="/assets/js/8.5b62d8b8.js"><link rel="prefetch" href="/assets/js/9.2bffa9e0.js"><link rel="prefetch" href="/assets/js/10.5b071193.js"><link rel="prefetch" href="/assets/js/12.c31125e5.js"><link rel="prefetch" href="/assets/js/13.d832cc42.js"><link rel="prefetch" href="/assets/js/15.0e9c1876.js"><link rel="prefetch" href="/assets/js/16.078765d3.js"><link rel="prefetch" href="/assets/js/17.32f0f25d.js"><link rel="prefetch" href="/assets/js/18.46c2ce43.js"><link rel="prefetch" href="/assets/js/19.fa188afc.js"><link rel="prefetch" href="/assets/js/20.82a19e10.js"><link rel="prefetch" href="/assets/js/21.b020585c.js"><link rel="prefetch" href="/assets/js/22.0219dd0e.js"><link rel="prefetch" href="/assets/js/23.7ee91638.js"><link rel="prefetch" href="/assets/js/24.264c71bf.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.9cc249f6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.031b6b85.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">静晴轩别苑</span></a> <div class="links"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/blog/" class="nav-link">博客</a></div><div class="nav-item"><a href="/zh/article/" class="nav-link router-link-active">文章</a></div><div class="nav-item"><a href="/zh/application/" class="nav-link">应用</a></div><div class="nav-item"><a href="/zh/recruit/" class="nav-link">招聘</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/article/beautify-vue-by-eslint-and-prettier.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/nicejade/vuepress-web-app" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/blog/" class="nav-link">博客</a></div><div class="nav-item"><a href="/zh/article/" class="nav-link router-link-active">文章</a></div><div class="nav-item"><a href="/zh/application/" class="nav-link">应用</a></div><div class="nav-item"><a href="/zh/recruit/" class="nav-link">招聘</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/article/beautify-vue-by-eslint-and-prettier.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/nicejade/vuepress-web-app" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>最新文章</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/zh/article/beautify-vue-by-eslint-and-prettier.html" class="active sidebar-link">使用ESLint ＆ Prettier美化Vue代码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/article/beautify-vue-by-eslint-and-prettier.html#初始化-vue-项目推介" class="sidebar-link">初始化 Vue 项目推介</a></li><li class="sidebar-sub-header"><a href="/zh/article/beautify-vue-by-eslint-and-prettier.html#集成-eslint-prettier" class="sidebar-link">集成 ESLint &amp; Prettier</a></li><li class="sidebar-sub-header"><a href="/zh/article/beautify-vue-by-eslint-and-prettier.html#修改规则配置" class="sidebar-link">修改规则配置</a></li><li class="sidebar-sub-header"><a href="/zh/article/beautify-vue-by-eslint-and-prettier.html#添加编辑器配置" class="sidebar-link">添加编辑器配置</a></li><li class="sidebar-sub-header"><a href="/zh/article/beautify-vue-by-eslint-and-prettier.html#pre-commit-hook-约束代码提交" class="sidebar-link">Pre-commit Hook 约束代码提交</a></li><li class="sidebar-sub-header"><a href="/zh/article/beautify-vue-by-eslint-and-prettier.html#写在文章最后" class="sidebar-link">写在文章最后</a></li></ul></li><li><a href="/zh/article/talk-about-my-blogs.html" class="sidebar-link">轩帅的博客之旅</a></li><li><a href="/zh/article/vue-webpack-boilerplate-template.html" class="sidebar-link">高效开发 Web 单页应用解决方案</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><p><a href="https://github.com/prettier/prettier" target="_blank" rel="noopener noreferrer">Prettier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一个有见识的代码格式化工具。它通过解析代码并使用自己的规则重新打印它，并考虑最大行长来强制执行一致的样式，并在必要时包装代码。如今，它已成为解决所有代码格式问题的优选方案；支持 <code>JavaScript</code>、 <code>Flow</code>、 <code>TypeScript</code>、 <code>CSS</code>、 <code>SCSS</code>、 <code>Less</code>、 <code>JSX</code>、 <code>Vue</code>、 <code>GraphQL</code>、 <code>JSON</code>、 <code>Markdown</code> 等语言，您可以结合 ESLint 和 Prettier，检测代码中潜在问题的同时，还能统一团队代码风格，从而促使写出高质量代码，来提升工作效率。</p> <p><img src="https://image.nicelinks.site/prettier-girl.jpg" alt="beautify-vue-by-eslint-and-prettier"></p> <h2 id="初始化-vue-项目推介">初始化 Vue 项目推介</h2> <p>在格式化代码方面， Prettier 确实和 ESLint 有重叠，但两者侧重点不同：ESLint 主要工作就是检查代码质量并给出提示，它所能提供的格式化功能很有限；而 Prettier 在格式化代码方面具有更大优势。而 Prettier 被设计为易于与 ESLint 集成，所以你可以轻松在项目中使两者，而无需担心冲突。本文就如何使用 ESLint ＆ Prettier，来格式并美化 Vue 代码做下探讨；如果您使用其他类型框架，这份经验绝大部份依旧适用。</p> <p>正如在 <a href="https://jeffjade.com/2018/05/20/140-vue-webpack-boilerplate-template/" target="_blank" rel="noopener noreferrer">开箱即用的 Vue Webpack 脚手架模版<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 所倡导的：<code>vue-cli3</code>在这个版本，它集成了更多丰富的功能，以及更多默认配置，可通过附带的图形用户界面创建、开发和管理项目... 而且已发布 <code>RC</code> 版本，核心功能已准备就绪，<code>API</code> 已趋于稳定，所以，建议采用 <code>vue-cli3</code> 来创建您的项目；您只需运行 <code>vue create my-project</code> 命令，接下来按照提示进行选择即可；为了您的项目可持续性愉快进行，<code>ESlint</code> 是您必要的选项。如果，您这样做了，您就可以在 <em>package.json</em> 中 <code>eslintConfig</code> 属性下，找到 <code>ESLint</code> 配置；接下来，只需将 <code>Prettier</code> 与 <code>ESLint</code> 集成即可。</p> <h2 id="集成-eslint-prettier">集成 ESLint &amp; Prettier</h2> <p>对于二者集成，可以利用插件来完成；<a href="https://github.com/prettier/eslint-plugin-prettier" target="_blank" rel="noopener noreferrer">eslint-plugin-prettier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 公开了一个 “recommended” 配置，将 <code>plugin:prettier/recommended</code> 添加到 <code>extends</code> 的子属性 <code>plugin:vue/essential</code> 之后，以默认设置在 <code>ESLint</code> 中启用对 <code>Prettier</code> 的支持：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;eslintConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;root&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;plugin:vue/essential&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;plugin:prettier/recommended&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;eslint:recommended&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>当然，还需安装依赖库： eslint-plugin-prettier 和 eslint-config-prettier (下文会讲到此依赖的作用)，更详细信息可以参见 Prettier 文档： <a href="https://prettier.io/docs/en/eslint.html" target="_blank" rel="noopener noreferrer">Integrating with ESLint
<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>yarn add --dev eslint-plugin-prettier eslint-config-prettier prettier-eslint-cli
</code></pre></div><p>这里需要补充说明下的是 <code>eslint-plugin-prettier</code> 得工作原理，它会对比格式化前和用 Prettier 格式化后的代码，有不一致的地方就会报错提示；我们可以借助一些工具来修复，比如： <code>eslint --fix</code>，<a href="https://github.com/prettier/prettier-eslint-cli" target="_blank" rel="noopener noreferrer">prettier-eslint-cli<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>；可将其配置在 package scripts 中，以方便使用：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;eslint-fix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src/**/**/*.vue --fix&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;format-code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prettier-eslint --write \&quot;src/**/*.js\&quot; \&quot;src/**/*.vue\&quot;&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://image.nicelinks.site/vue-eslint-prettier.png" alt="beautify-vue-by-eslint-and-prettier"></p> <h2 id="修改规则配置">修改规则配置</h2> <p>您需要知道的是，两者混合使用时候，需要修改规则，以防止重复或冲突；<code>eslint-config-prettier</code> 即为解决此问题的存在，可以使用它关闭所有可能引起冲突的规则。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;prettier/prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>事实上，当在项目中如此配置，可能会出现些“诡异”的报错，即便采用如上修复，也无法解决；而且这也不是您预期的提示；</p> <p><span style="color: red">error</span>: Delete <code>⏎</code> (prettier/prettier) at src/pages/xxx</p> <p>此时，可以对规则进行甄别、梳理，择选出适宜的规则；对于此，您可以参考 <a href="https://prettier.io/docs/en/options.html" target="_blank" rel="noopener noreferrer">Configuring Prettier Options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &amp; <a href="https://github.com/prettier/eslint-plugin-prettier" target="_blank" rel="noopener noreferrer">eslint-plugin-prettier#options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>；依据个人编码习惯，有采取如下配置 ( 可在 <a href="https://github.com/nicejade/awesome-vue-cli3-example/blob/master/package.json" target="_blank" rel="noopener noreferrer">awesome-vue-cli3-example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 查看源码)：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;no-console&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;prettier/prettier&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;bracketSpacing&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;jsxBracketSameLine&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;flow&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="添加编辑器配置">添加编辑器配置</h2> <h4 id="atom-编辑器">Atom 编辑器</h4> <p>可以安装 <a href="https://atom.io/packages/prettier-atom" target="_blank" rel="noopener noreferrer">prettier-atom<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>；<code>Atom</code> 编辑器还会提示你安装更多辅助插件；</p> <div class="language-bash extra-class"><pre class="language-bash"><code>apm <span class="token function">install</span> prettier-atom
</code></pre></div><p>它有两种模式可以使用：</p> <ul><li>保存时自动格式化（Packages → Prettier → Toggle Format on Save）</li> <li>使用键盘快捷方式手动调用（如果没有选择，整个文件被格式化）：<code>CTRL + ALT + F</code></li></ul> <h4 id="vs-code-编辑器">VS Code 编辑器</h4> <p>安装插件：<a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener noreferrer">ESlint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，<a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener noreferrer">Prettier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，VS Code 插件配置统一在 preference → setting → user setting 设置 (快捷键： <code>Command + ,</code>)，即可实现保存时自动格式化：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;prettier.eslintIntegration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eslint.autoFixOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>除此外，你还在根据自己的喜好/习惯，为 <code>Vscode</code> 编辑器设定 Prettier 美化风格，详细字段可以参见 <a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target="_blank" rel="noopener noreferrer">prettier-vscode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;prettier.singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;prettier.semi&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token property">&quot;prettier.tabWidth&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token property">&quot;prettier.trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span>
</code></pre></div><h3 id="sublime-text-编辑器">Sublime Text 编辑器</h3> <p>安装插件：<a href="https://github.com/jonlabelle/SublimeJsPrettier" target="_blank" rel="noopener noreferrer">JsPrettier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，它有依赖到 <code>Prettier</code> 等，所以需要全局安装：<code>yarn global add prettier</code>；在 “Preferences → Setting” 中添加如下设置，即可实现保存时自动格式化；</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;auto_format_on_save&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当然您也可以自定义快捷键，以按需格式化代码；在 “Preferences → Key Binding” 的 User Keymap 中，参考如下示例，注入命令即可 (Windows OS 则是：<code>ctrl + alt + f</code>)：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span> <span class="token property">&quot;keys&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;command+alt+f&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;js_prettier&quot;</span> <span class="token punctuation">}</span>
</code></pre></div><p>同样，你也根据自己的喜好/习惯，为 <code>SublimeText</code> 编辑器设定 Prettier 美化风格；更多设置、使用细节，可参见 <a href="https://github.com/jonlabelle/SublimeJsPrettier#usage" target="_blank" rel="noopener noreferrer">SublimeJsPrettier#Usage<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>；个人设定风格如下(操作文件位置：Preferences → Package Settings → JsPrettier → Settings - User)：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;debug&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;prettier_cli_path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;node_path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_format_on_save&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_format_on_save_excludes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;auto_format_on_save_requires_prettier_config&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;allow_inline_formatting&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;custom_file_extensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;max_file_size_limit&quot;</span><span class="token operator">:</span> -<span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;additional_cli_args&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;prettier_options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;printWidth&quot;</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
    <span class="token property">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;bracketSpacing&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;jsxBracketSameLine&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;babylon&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;requirePragma&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;proseWrap&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;arrowParens&quot;</span><span class="token operator">:</span> <span class="token string">&quot;avoid&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="pre-commit-hook-约束代码提交">Pre-commit Hook 约束代码提交</h2> <p>以上探讨了如何运用 ESLint ＆ Prettier 写出优质代码，这都是针对个人的推荐性行为；为保证团队统一代码风格，则必须采取些手段以强制约束；假如您的团队使用 <code>Git</code> 作为代码管理工具，在 <code>commit</code> 行为及之前进行甄别约束，是很棒的选择；于此，可借助 <a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &amp; <a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来实现之。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># install husky &amp; lint-staged</span>
yarn add lint-staged husky --dev

<span class="token comment"># package.json config</span>
<span class="token string">&quot;lint-staged&quot;</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;**/**.{js,json,pcss,md,vue}&quot;</span><span class="token keyword">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;prettier --write&quot;</span>,
    <span class="token string">&quot;git add&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>,
<span class="token string">&quot;husky&quot;</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;hooks&quot;</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;pre-commit&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;yarn run precommit-msg &amp;&amp; lint-staged&quot;</span>,
    <span class="token string">&quot;pre-push&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;yarn test&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>,
</code></pre></div><p>值得一提的是，在实际项目中， <code>husky</code> 很可能由于各种原因，导致不能很好的工作；这多半是由于 <code>.git/hooks/pre-commit</code> 与期待目标不匹配所致，您可以手动修改，也可以采取如下办法 (备注：如果您的 <code>husky</code> 版本在 0.14 及以上)：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">rm</span> -rf .git/hooks/*
node node_modules/husky/lib/installer/bin <span class="token function">install</span>
</code></pre></div><h2 id="写在文章最后">写在文章最后</h2> <p>“<span class="awesome-poetry">上邪，我欲与君相知，长命无绝衰。山无陵，江水为竭。冬雷震震，夏雨雪。天地合，乃敢与君绝</span>”。这突如其来的一首古诗，乍看起来，与本文没有丝毫关系；但需要提醒的是：<strong>您在编写高质量代码时付出的努力越多，您花在调试上的时间就越少</strong>。如果您为项目开发工作流程，做了足够充分而适宜的建设，这不仅可以极大提升代码编写质量与速度，同时可节省调试、解决问题时间开销，而且还能避免无端而起的坏心情，从而更进一步促进工作效率，如此造就的这份优质循环，可以使得您拥有更多时间去学习、折腾、品味人生，这其中自然也可包括品读优美<code>古诗词</code>🐉☺️；所以？<strong>工欲善其事，必先利其器</strong>，您学到了么？</p> <div class="advertisement-moudle"><div class="el-carousel"><div class="el-carousel__container" style="height:100px;"><button type="button" class="el-carousel__arrow el-carousel__arrow--left"><i class="el-icon-arrow-left"></i></button><button type="button" class="el-carousel__arrow el-carousel__arrow--right"><i class="el-icon-arrow-right"></i></button><div class="el-carousel__item" style="ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);transform:translateX(0px) scale(1);display:none;"><!----><a href="//click.dji.com/AHT8n4-15xfguKCaOzzEPA?pm=link&amp;as=0004" target="_blank" rel="noreferrer noopener"><img src="//u.djicdn.com/uploads/ad_image_file/file/1234/970_250.jpg" alt="特洛Tello-迷你无人机" class="advertisement-img"></a></div><div class="el-carousel__item" style="ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);transform:translateX(0px) scale(1);display:none;"><!----><a href="//click.dji.com/AHT8n4-15xfguKCaOzzEPA?pm=link&amp;as=0004" target="_blank" rel="noreferrer noopener"><img src="//u.djicdn.com/uploads/ad_image_file/file/1242/970_250.jpg" alt="特洛Tello-益智编程无人机" class="advertisement-img"></a></div><div class="el-carousel__item" style="ms-transform:translateX(0px) scale(1);webkit-transform:translateX(0px) scale(1);transform:translateX(0px) scale(1);display:none;"><!----><a href="//click.dji.com/AHT8n4-15xfguKCaOzzEPA?pm=link&amp;as=0004" target="_blank" rel="noreferrer noopener"><img src="//u.djicdn.com/uploads/ad_image_file/file/992/970___250.jpg" alt="大疆无人机-DJI &quot;御&quot; Mavic Air" class="advertisement-img"></a></div></div><ul class="el-carousel__indicators"></ul></div></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2018-6-26 19:50:29</span></div></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/zh/article/talk-about-my-blogs.html">
          轩帅的博客之旅
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/14.05d6de49.js" defer></script><script src="/assets/js/6.b86e266d.js" defer></script><script src="/assets/js/4.d86a8d0d.js" defer></script><script src="/assets/js/app.97ceaf89.js" defer></script>
  </body>
</html>
